!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b7aef2cb-cc8a-4e17-8058-bac7c0c8648a",e._sentryDebugIdIdentifier="sentry-dbid-b7aef2cb-cc8a-4e17-8058-bac7c0c8648a")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4986,7144],{13874:(e,t,n)=>{"use strict";n.d(t,{d:()=>d});var a=n(80263),s=n(44893),r=n(79279),i=n(53239),l=n(51500);let o=(0,r.F)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),c=(0,r.F)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),d=i.forwardRef((e,t)=>{let{className:n,size:r,...i}=e;return(0,a.jsx)(s.bL,{className:(0,l.cn)(o({size:r}),n),...i,ref:t,children:(0,a.jsx)(s.zi,{className:(0,l.cn)(c({size:r}))})})});d.displayName=s.bL.displayName},17904:(e,t,n)=>{"use strict";n.d(t,{$m:()=>d,As:()=>c,nD:()=>o,ub:()=>u});var a=n(80263),s=n(69751),r=n(72259),i=n(53239),l=n(51500);let o=s.bL,c=i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.q7,{ref:t,className:(0,l.cn)("border-b",n),...r})});c.displayName="AccordionItem";let d=i.forwardRef((e,t)=>{let{className:n,children:i,hideIcon:o,...c}=e;return(0,a.jsx)(s.Y9,{className:"flex",children:(0,a.jsxs)(s.l9,{ref:t,className:(0,l.cn)("flex flex-1 gap-2 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180 text-left",n),...c,children:[i,!o&&(0,a.jsx)(r.A,{className:"h-4 w-4 transition-transform duration-200 shrink-0"})]})})});d.displayName=s.l9.displayName;let u=i.forwardRef((e,t)=>{let{className:n,children:r,...i}=e;return(0,a.jsx)(s.UC,{ref:t,className:(0,l.cn)("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",n),...i,children:(0,a.jsx)("div",{className:"pb-4 pt-0",children:r})})});u.displayName=s.UC.displayName},24771:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(80263);n(53239);let s=function(e){let{children:t,target:n="_blank",href:s,className:r,onClick:i,style:l}=e;return(0,a.jsx)("a",{onClick:i,href:s,target:n,rel:"noopener noreferrer",style:l,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})}},33888:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(15740).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},34473:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>tw});var a=n(80263),s=n(53239),r=n(37055),i=n(33888),l=n(25757),o=n(3689),c=n(18687),d=n(75189),u=n(26587),p=n(796),m=n(15601),x=n.n(m),f=n(26218),h=n(48465);n(19360);var b=n(92882),g=n(87645),y=n(63492),j=n(40022),v=n(93210),w=n(78358);let N=[{id:"1",type:"primary",data:{label:"Primary Database",region:"East US (Ohio)",provider:"AWS",regionIcon:"EAST_US"},position:{x:825,y:0}},{id:"2",type:"replica",data:{label:"Iceberg",details:"3 tables",regionIcon:"WEST_US"},position:{x:875,y:110}},{id:"3",type:"replica",data:{label:"BigQuery",details:"5 tables",regionIcon:"WEST_US"},position:{x:875,y:200}},{id:"4",type:"blank",position:{x:875,y:290},data:{}},{id:"5",type:"cta",position:{x:125,y:20},data:{}}],S=[{id:"e1-2",source:"1",target:"2",type:"smoothstep",animated:!0},{id:"e1-3",source:"1",target:"3",type:"smoothstep",animated:!0},{id:"e1-4",source:"1",target:"4",type:"smoothstep",animated:!0}],E=()=>(0,a.jsx)(f.Ln,{"data-sentry-element":"ReactFlowProvider","data-sentry-component":"ReplicationComingSoon","data-sentry-source-file":"ComingSoon.tsx",children:(0,a.jsx)(A,{"data-sentry-element":"ReplicationStaticMockup","data-sentry-source-file":"ComingSoon.tsx"})}),A=()=>{let e=(0,s.useMemo)(()=>N,[]),t=(0,s.useMemo)(()=>S,[]),{resolvedTheme:n}=(0,p.D)(),r=(0,s.useMemo)(()=>({primary:_,replica:C,blank:I,cta:k}),[]);return(0,a.jsxs)("div",{className:"relative border-t","data-sentry-component":"ReplicationStaticMockup","data-sentry-source-file":"ComingSoon.tsx",children:[(0,a.jsx)("div",{className:"h-[500px] w-full relative",children:(0,a.jsx)(f.Gc,{fitView:!0,fitViewOptions:{minZoom:.9,maxZoom:.9},className:"instance-configuration",zoomOnPinch:!1,zoomOnScroll:!1,nodesDraggable:!0,nodesConnectable:!1,zoomOnDoubleClick:!1,edgesFocusable:!1,edgesUpdatable:!1,nodes:e,edges:t,nodeTypes:r,proOptions:{hideAttribution:!0},"data-sentry-element":"ReactFlow","data-sentry-source-file":"ComingSoon.tsx",children:(0,a.jsx)(h.V,{color:"dark"===n?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.4)","data-sentry-element":"Background","data-sentry-source-file":"ComingSoon.tsx"})})}),(0,a.jsx)(R,{"data-sentry-element":"StaticDestinations","data-sentry-source-file":"ComingSoon.tsx"})]})},_=e=>{let{data:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col rounded bg-surface-100 border border-default","data-sentry-component":"PrimaryNode","data-sentry-source-file":"ComingSoon.tsx",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between p-3",style:{width:w.M4/2+55},children:[(0,a.jsxs)("div",{className:"flex gap-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-brand-500 border border-brand-600 rounded-md flex items-center justify-center",children:(0,a.jsx)(i.A,{size:16,"data-sentry-element":"Database","data-sentry-source-file":"ComingSoon.tsx"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,a.jsx)("p",{className:"text-sm",children:t.label}),(0,a.jsx)("p",{className:"flex items-center gap-x-1",children:(0,a.jsx)("span",{className:"text-sm text-foreground-light",children:t.region})}),(0,a.jsx)("p",{className:"flex items-center gap-x-1",children:(0,a.jsx)("span",{className:"text-sm text-foreground-light",children:t.provider})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("img",{alt:"region icon",className:"w-6 rounded-sm mt-0.5",src:"".concat(y.o2,"/img/regions/").concat(t.regionIcon,".svg")}),(0,a.jsx)(l.A,{size:10,className:"bg-brand-500 stroke-none rounded-full","data-sentry-element":"Circle","data-sentry-source-file":"ComingSoon.tsx"})]})]}),(0,a.jsx)(f.h7,{type:"source",position:f.yX.Left,className:"opacity-25","data-sentry-element":"Handle","data-sentry-source-file":"ComingSoon.tsx"})]})},C=e=>{let{data:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col rounded bg-surface-100 border border-default px-2","data-sentry-component":"ReplicaNode","data-sentry-source-file":"ComingSoon.tsx",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between p-3",style:{width:w.M4/2-10},children:[(0,a.jsx)("div",{className:"flex gap-x-3",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,a.jsx)("p",{className:"",children:t.label}),(0,a.jsx)("p",{className:"flex items-center gap-x-1",children:(0,a.jsx)("span",{className:"text-sm text-foreground-light",children:t.details})})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("img",{alt:"region icon",className:"w-6 rounded-sm mt-0.5",src:"".concat(y.o2,"/img/regions/").concat(t.regionIcon,".svg")}),(0,a.jsx)(l.A,{size:10,className:"bg-brand-500 stroke-none rounded-full","data-sentry-element":"Circle","data-sentry-source-file":"ComingSoon.tsx"})]})]}),(0,a.jsx)(f.h7,{type:"target",position:f.yX.Left,className:"opacity-25","data-sentry-element":"Handle","data-sentry-source-file":"ComingSoon.tsx"})]})},I=()=>(0,a.jsx)("div",{className:"flex flex-col rounded bg-surface-100 border border-default px-1","data-sentry-component":"BlankNode","data-sentry-source-file":"ComingSoon.tsx",children:(0,a.jsxs)("div",{className:"flex items-start justify-between p-3",style:{width:w.M4/2},children:[(0,a.jsx)("div",{className:"flex gap-x-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.A,{size:16,"data-sentry-element":"Plus","data-sentry-source-file":"ComingSoon.tsx"}),(0,a.jsx)("span",{className:"text-sm",children:"Add new"})]})}),(0,a.jsx)(f.h7,{type:"target",position:f.yX.Left,className:"opacity-25","data-sentry-element":"Handle","data-sentry-source-file":"ComingSoon.tsx"})]})}),k=()=>(0,a.jsx)(r.P.div,{className:"bg-surface-100 rounded-lg p-8 shadow-lg",style:{border:"1px solid",borderColor:"hsl(var(--foreground-default) / var(--border-opacity, 0.6))"},animate:{"--border-opacity":[.6,.4,.2,.1,.2,.4,.6]},transition:{duration:4,ease:"linear",repeat:Number.POSITIVE_INFINITY},"data-sentry-element":"unknown","data-sentry-component":"CTANode","data-sentry-source-file":"ComingSoon.tsx",children:(0,a.jsxs)("div",{className:"grid gap-4  w-[425px] relative",children:[(0,a.jsx)("span",{className:"text-xs uppercase text-foreground-light",children:"Early Access"}),(0,a.jsx)("h2",{className:"text-lg",children:"Replicate Your Data in Real Time"}),(0,a.jsx)("p",{children:"Stream changes from your Postgres database into your data warehouseâ€”no manual exports, no lag."}),(0,a.jsx)("p",{children:"We're rolling this out to a limited group of early adopters. Sign up to get early access."}),(0,a.jsx)("p",{children:(0,a.jsx)(j.$,{asChild:!0,type:"secondary","data-sentry-element":"Button","data-sentry-source-file":"ComingSoon.tsx",children:(0,a.jsx)(x(),{href:"https://forms.supabase.com/pg_replicate",target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"ComingSoon.tsx",children:(0,a.jsxs)("span",{className:"flex items-center gap-x-1",children:["Request Early Access",(0,a.jsx)(c.A,{size:16,"data-sentry-element":"ArrowUpRight","data-sentry-source-file":"ComingSoon.tsx"})]})})})})]})}),R=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col bg-surface-100 px-6 py-6 border-t relative ",children:[(0,a.jsx)("div",{className:"z-10 bg-surface-300 w-full h-full absolute top-0 left-0 opacity-30"}),(0,a.jsx)(b.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"ComingSoon.tsx",children:(0,a.jsx)(b.gu,{className:"!py-0","data-sentry-element":"ScaffoldSection","data-sentry-source-file":"ComingSoon.tsx",children:(0,a.jsxs)("div",{className:"col-span-12",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"relative w-52",children:[(0,a.jsx)(d.A,{size:14,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground-lighter","data-sentry-element":"Search","data-sentry-source-file":"ComingSoon.tsx"}),(0,a.jsx)(v.p,{className:"pl-9 bg-transparent h-8 pointer-events-none",placeholder:"Search...","data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"ComingSoon.tsx"})]}),(0,a.jsx)(j.$,{disabled:!0,type:"primary",icon:(0,a.jsx)(o.A,{size:16}),className:"flex items-center pointer-events-none","data-sentry-element":"Button","data-sentry-source-file":"ComingSoon.tsx",children:"New destination"})]}),(0,a.jsx)(g.A,{head:[(0,a.jsx)(g.A.th,{children:"Name"},"name"),(0,a.jsx)(g.A.th,{children:"Publication"},"publication"),(0,a.jsx)(g.A.th,{children:"Lag"},"lag"),(0,a.jsx)(g.A.th,{children:"Status"},"status"),(0,a.jsx)(g.A.th,{},"actions")],className:"mt-4",body:[{name:"BigQuery",tables:4,lag:"55ms",status:"Enabled"},{name:"Iceberg",tables:4,lag:"85ms",status:"Enabled"},{name:"US East",tables:4,lag:"125ms",status:"Enabled"}].map((e,t)=>(0,a.jsxs)(g.A.tr,{children:[(0,a.jsx)(g.A.td,{children:e.name}),(0,a.jsx)(g.A.td,{children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-bold",children:"All"}),(0,a.jsxs)("span",{className:"text-sm text-foreground-lighter",children:[e.tables," tables"]})]})}),(0,a.jsx)(g.A.td,{children:e.lag}),(0,a.jsx)(g.A.td,{children:(0,a.jsxs)("span",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.A,{size:10,className:"bg-brand-500 stroke-none rounded-full"}),e.status]})}),(0,a.jsx)(g.A.td,{className:"text-right",children:(0,a.jsx)("button",{className:"p-1",children:(0,a.jsx)(u.A,{size:18})})})]},t)),"data-sentry-element":"Table","data-sentry-source-file":"ComingSoon.tsx"})]})})})]})});var P=n(83927),T=n.n(P),M=n(90478),D=n(20313),L=n(56947),z=n(65172);let q={sources:e=>["projects",e,"sources"],destinations:e=>["projects",e,"destinations"],destinationById:(e,t)=>["projects",e,"destinations",t],publications:(e,t)=>["projects",e,"sources",t,"publications"],tables:(e,t)=>["projects",e,"sources",t,"tables"],pipelines:e=>["projects",e,"pipelines"],pipelineById:(e,t)=>["projects",e,"pipelines",t],pipelinesStatus:(e,t)=>["projects",e,"pipelines",t,"status"],pipelinesReplicationStatus:(e,t)=>["projects",e,"pipelines",t,"replication-status"]};async function B(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:a,error:s}=await (0,z.Jt)("/platform/replication/{ref}/destinations",{params:{path:{ref:n}},signal:t});return s&&(0,z.H4)(s),a}let F=function(e){let{projectRef:t}=e,{enabled:n=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,L.I)(q.destinations(t),e=>{let{signal:n}=e;return B({projectRef:t},n)},{enabled:n&&void 0!==t,...a})};async function O(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:a,error:s}=await (0,z.Jt)("/platform/replication/{ref}/pipelines",{params:{path:{ref:n}},signal:t});return s&&(0,z.H4)(s),a}let V=function(e){let{projectRef:t}=e,{enabled:n=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,L.I)(q.pipelines(t),e=>{let{signal:n}=e;return O({projectRef:t},n)},{enabled:n&&void 0!==t,...a})};async function U(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:a,error:s}=await (0,z.Jt)("/platform/replication/{ref}/sources",{params:{path:{ref:n}},signal:t});return s&&(0,z.H4)(s),a}let H=function(e){let{projectRef:t}=e,{enabled:n=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,L.I)(q.sources(t),e=>{let{signal:n}=e;return U({projectRef:t},n)},{enabled:n&&void 0!==t,...a})};var Q=n(51500),J=n(27799),$=n(32981),W=n(32144),X=n(80251),G=n(73969);async function K(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:a,error:s}=await (0,z.bE)("/platform/replication/{ref}/tenants-sources",{params:{path:{ref:n}},signal:t});return s&&(0,z.H4)(s),a}let Y=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,W.jE)();return(0,X.n)(e=>K(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(q.sources(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?G.oR.error("Failed to create tenant or source: ".concat(e.message)):t(e,n,a)},...n})};async function Z(e,t){let{projectRef:n,sourceId:a}=e;if(!n)throw Error("projectRef is required");if(!a)throw Error("sourceId is required");let{data:s,error:r}=await (0,z.Jt)("/platform/replication/{ref}/sources/{source_id}/publications",{params:{path:{ref:n,source_id:a}},signal:t});return r&&(0,z.H4)(r),s.publications.filter(e=>"supabase_realtime"!==e.name)}let ee=function(e){let{projectRef:t,sourceId:n}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,L.I)(q.publications(t,n),e=>{let{signal:a}=e;return Z({projectRef:t,sourceId:n},a)},{enabled:a&&void 0!==t&&void 0!==n,...s})};async function et(e,t){let{projectRef:n,pipelineId:a}=e;if(!n)throw Error("projectRef is required");let{data:s,error:r}=await (0,z.bE)("/platform/replication/{ref}/pipelines/{pipeline_id}/start",{params:{path:{ref:n,pipeline_id:a}},signal:t});return r&&(0,z.H4)(r),s}let en=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,W.jE)();return(0,X.n)(e=>et(e),{async onSuccess(t,n,s){let{projectRef:r,pipelineId:i}=n;await a.invalidateQueries(q.pipelinesStatus(r,i)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?G.oR.error("Failed to start pipeline: ".concat(e.message)):t(e,n,a)},...n})};var ea=n(87494),es=n(9919),er=n(13874),ei=n(19428),el=n(47452),eo=n(40990),ec=n(73815),ed=n(17904),eu=n(1012),ep=n(86254),em=n(39353),ex=n(96572),ef=n(28881),eh=n(80903),eb=n(9681),eg=n(61965),ey=n(80016);let ej=e=>{let{publications:t,loading:n,onNewPublicationClick:r,field:i}=e,[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)((null==i?void 0:i.value)||""),[p,m]=(0,s.useState)("");function x(e){u(e),c(!1),i.onChange(e)}return(0,a.jsxs)(eb.AM,{modal:!1,open:l,onOpenChange:e=>{c(e),!e&&(null==i?void 0:i.onBlur)&&i.onBlur()},"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"PublicationsComboBox","data-sentry-source-file":"PublicationsComboBox.tsx",children:[(0,a.jsx)(eb.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx",children:(0,a.jsx)(j.$,{type:"default",size:"medium",className:"w-full [&>span]:w-full text-left",iconRight:(0,a.jsx)(ex.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),name:i.name,onBlur:i.onBlur,"data-sentry-element":"Button","data-sentry-source-file":"PublicationsComboBox.tsx",children:d||"Select publication"})}),(0,a.jsx)(eb.hl,{className:"p-0",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx",children:(0,a.jsxs)(eg.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx",children:[(0,a.jsx)(eg.G7,{placeholder:"Find publication...",value:p,onValueChange:function(e){m(e)},"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx"}),(0,a.jsxs)(eg.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx",children:[(0,a.jsx)(eg.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx",children:n?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-center justify-center",children:[(0,a.jsx)(ef.A,{size:12,className:"animate-spin"}),"Loading..."]}):"No publications found"}),(0,a.jsx)(eg.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx",children:(0,a.jsx)(ey.FK,{className:t.length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"PublicationsComboBox.tsx",children:t.map(e=>(0,a.jsxs)(eg.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{x(e)},onClick:()=>{x(e)},children:[(0,a.jsx)("span",{children:e}),d===e&&(0,a.jsx)(eh.A,{className:"text-brand",strokeWidth:2,size:13})]},e))})}),(0,a.jsx)(eg.fx,{"data-sentry-element":"CommandSeparator_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx"}),(0,a.jsx)(eg.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx",children:(0,a.jsxs)(eg.h_,{className:"cursor-pointer w-full",onSelect:r,onClick:r,"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"PublicationsComboBox.tsx",children:[(0,a.jsx)(o.A,{size:14,strokeWidth:1.5,className:"mr-2","data-sentry-element":"Plus","data-sentry-source-file":"PublicationsComboBox.tsx"}),(0,a.jsx)("p",{children:"New publication"})]})})]})]})})]})};async function ev(e,t){let{projectRef:n,sourceId:a,name:s,tables:r}=e;if(!n)throw Error("projectRef is required");let{data:i,error:l}=await (0,z.bE)("/platform/replication/{ref}/sources/{source_id}/publications",{params:{path:{ref:n,source_id:a}},body:{name:s,tables:r},signal:t});return l&&(0,z.H4)(l),i}let ew=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,W.jE)();return(0,X.n)(e=>ev(e),{async onSuccess(t,n,s){let{projectRef:r,sourceId:i}=n;await a.invalidateQueries(q.publications(r,i)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?G.oR.error("Failed to create publication: ".concat(e.message)):t(e,n,a)},...n})};async function eN(e,t){let{projectRef:n,sourceId:a}=e;if(!n)throw Error("projectRef is required");if(!a)throw Error("sourceId is required");let{data:s,error:r}=await (0,z.Jt)("/platform/replication/{ref}/sources/{source_id}/tables",{params:{path:{ref:n,source_id:a}},signal:t});return r&&(0,z.H4)(r),s}let eS=function(e){let{projectRef:t,sourceId:n}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,L.I)(q.tables(t,n),e=>{let{signal:a}=e;return eN({projectRef:t,sourceId:n},a)},{enabled:a&&void 0!==t&&void 0!==n,...s})};var eE=n(25643),eA=n(39412),e_=n(61395);let eC=e=>{let{visible:t,sourceId:n,onClose:s}=e,{ref:r}=(0,M.g)(),{mutateAsync:i,isLoading:l}=ew(),{data:o}=eS({projectRef:r,sourceId:n}),c="publication-editor",d=em.z.object({name:em.z.string().min(1,"Name is required"),tables:em.z.array(em.z.string()).min(1,"At least one table is required")}),u={name:"",tables:[]},p=(0,ea.mN)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,$.u)(d),defaultValues:u}),m=async e=>{if(!r)return console.error("Project ref is required");if(!n)return console.error("Source id is required");try{await i({projectRef:r,sourceId:n,name:e.name,tables:e.tables.map(e=>{let[t,n]=e.split(".");return{schema:t,name:n}})}),G.oR.success("Successfully created publication"),s()}catch(e){G.oR.error("Failed to create publication")}p.reset(u)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(es.cj,{open:t,onOpenChange:s,"data-sentry-element":"Sheet","data-sentry-source-file":"NewPublicationPanel.tsx",children:(0,a.jsx)(es.h,{showClose:!1,size:"default","data-sentry-element":"SheetContent","data-sentry-source-file":"NewPublicationPanel.tsx",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)(es.Fm,{"data-sentry-element":"SheetHeader","data-sentry-source-file":"NewPublicationPanel.tsx",children:(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(es.qp,{"data-sentry-element":"SheetTitle","data-sentry-source-file":"NewPublicationPanel.tsx",children:"New Publication"}),(0,a.jsx)(es.Qs,{"data-sentry-element":"SheetDescription","data-sentry-source-file":"NewPublicationPanel.tsx",children:"Create a new publication to share table changes for replication"})]}),(0,a.jsxs)(es.kN,{className:(0,Q.cn)("text-muted hover:opacity-100","focus:outline-none focus:ring-2","disabled:pointer-events-none"),"data-sentry-element":"SheetClose","data-sentry-source-file":"NewPublicationPanel.tsx",children:[(0,a.jsx)(eE.A,{className:"h-3 w-3","data-sentry-element":"X","data-sentry-source-file":"NewPublicationPanel.tsx"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})}),(0,a.jsx)(es.Xc,{className:"flex-grow overflow-auto","data-sentry-element":"SheetSection","data-sentry-source-file":"NewPublicationPanel.tsx",children:(0,a.jsx)(el.lV,{...p,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"NewPublicationPanel.tsx",children:(0,a.jsxs)("form",{id:c,onSubmit:p.handleSubmit(m),className:"flex flex-col gap-y-4",children:[(0,a.jsx)(el.zB,{control:p.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{label:"Name",layout:"vertical",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(v.p,{...t,placeholder:"Name"})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"NewPublicationPanel.tsx"}),(0,a.jsx)(el.zB,{control:p.control,name:"tables",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{label:"Tables",description:"Which tables to make available for replication",children:(0,a.jsx)(el.MJ,{children:(0,a.jsxs)(eA.xf,{values:t.value,onValuesChange:t.onChange,disabled:l,children:[(0,a.jsx)(eA.xf.Trigger,{children:(0,a.jsx)(eA.xf.Input,{placeholder:"Select tables"})}),(0,a.jsx)(eA.xf.Content,{children:(0,a.jsx)(eA.xf.List,{children:null==o?void 0:o.tables.map(e=>(0,a.jsx)(eA.xf.Item,{value:"".concat(e.schema,".").concat(e.name),children:"".concat(e.schema,".").concat(e.name)},"".concat(e.schema,".").concat(e.name)))})})]})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"NewPublicationPanel.tsx"})]})})}),(0,a.jsxs)(es.XW,{"data-sentry-element":"SheetFooter","data-sentry-source-file":"NewPublicationPanel.tsx",children:[(0,a.jsx)(j.$,{type:"default",disabled:l,onClick:s,"data-sentry-element":"Button","data-sentry-source-file":"NewPublicationPanel.tsx",children:"Cancel"}),(0,a.jsx)(j.$,{type:"primary",disabled:l,form:c,htmlType:"submit","data-sentry-element":"Button","data-sentry-source-file":"NewPublicationPanel.tsx",children:"Create publication"})]})]})})})})};async function eI(e,t){let{projectRef:n,destinationId:a}=e;if(!n)throw Error("projectRef is required");if(!a)throw Error("destinationId is required");let{data:s,error:r}=await (0,z.Jt)("/platform/replication/{ref}/destinations/{destination_id}",{params:{path:{ref:n,destination_id:a}},signal:t});return r&&(0,z.H4)(r),s}let ek=function(e){let{projectRef:t,destinationId:n}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,L.I)(q.destinationById(t,n),e=>{let{signal:a}=e;return eI({projectRef:t,destinationId:n},a)},{enabled:a&&void 0!==t&&void 0!==n,...s})};async function eR(e,t){let{projectRef:n,pipelineId:a}=e;if(!n)throw Error("projectRef is required");if(!a)throw Error("pipelineId is required");let{data:s,error:r}=await (0,z.Jt)("/platform/replication/{ref}/pipelines/{pipeline_id}",{params:{path:{ref:n,pipeline_id:a}},signal:t});return r&&(0,z.H4)(r),s}let eP=function(e){let{projectRef:t,pipelineId:n}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,L.I)(q.pipelineById(t,n),e=>{let{signal:a}=e;return eR({projectRef:t,pipelineId:n},a)},{enabled:a&&void 0!==t&&void 0!==n,...s})};async function eT(e,t){let{projectRef:n,pipelineId:a}=e;if(!n)throw Error("projectRef is required");let{data:s,error:r}=await (0,z.bE)("/platform/replication/{ref}/pipelines/{pipeline_id}/stop",{params:{path:{ref:n,pipeline_id:a}},signal:t});return r&&(0,z.H4)(r),s}let eM=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,W.jE)();return(0,X.n)(e=>eT(e),{async onSuccess(t,n,s){let{projectRef:r,pipelineId:i}=n;await a.invalidateQueries(q.pipelinesStatus(r,i)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?G.oR.error("Failed to stop pipeline: ".concat(e.message)):t(e,n,a)},...n})};async function eD(e,t){let{projectRef:n,destinationName:a,destinationConfig:{bigQuery:{projectId:s,datasetId:r,serviceAccountKey:i,maxStalenessMins:l}},pipelineConfig:{publicationName:o,batch:{maxSize:c,maxFillMs:d}},sourceId:u}=e;if(!n)throw Error("projectRef is required");let{data:p,error:m}=await (0,z.bE)("/platform/replication/{ref}/destinations-pipelines",{params:{path:{ref:n}},body:{destination_name:a,destination_config:{big_query:{project_id:s,dataset_id:r,service_account_key:i,max_staleness_mins:l}},pipeline_config:{publication_name:o,batch:{max_size:c,max_fill_ms:d}},source_id:u},signal:t});return m&&(0,z.H4)(m),p}let eL=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,W.jE)();return(0,X.n)(e=>eD(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(q.destinations(r)),await a.invalidateQueries(q.pipelines(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?G.oR.error("Failed to create destination or pipeline: ".concat(e.message)):t(e,n,a)},...n})};async function ez(e,t){let{destinationId:n,pipelineId:a,projectRef:s,destinationName:r,destinationConfig:{bigQuery:{projectId:i,datasetId:l,serviceAccountKey:o,maxStalenessMins:c}},pipelineConfig:{publicationName:d,batch:{maxSize:u,maxFillMs:p}},sourceId:m}=e;if(!s)throw Error("projectRef is required");let{data:x,error:f}=await (0,z.bE)("/platform/replication/{ref}/destinations-pipelines/{destination_id}/{pipeline_id}",{params:{path:{ref:s,destination_id:n,pipeline_id:a}},body:{destination_name:r,destination_config:{big_query:{project_id:i,dataset_id:l,service_account_key:o,max_staleness_mins:c}},pipeline_config:{publication_name:d,batch:{max_size:u,max_fill_ms:p}},source_id:m},signal:t});return f&&(0,z.H4)(f),x}let eq=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,W.jE)();return(0,X.n)(e=>ez(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(q.destinations(r)),await a.invalidateQueries(q.pipelines(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?G.oR.error("Failed to update destination or pipeline: ".concat(e.message)):t(e,n,a)},...n})},eB=e=>{let{visible:t,sourceId:n,onClose:r,existingDestination:i}=e,{ref:l}=(0,M.g)(),[o,c]=(0,s.useState)(!1),{mutateAsync:d,isLoading:u}=Y(),{mutateAsync:p,isLoading:m}=eL(),{mutateAsync:x,isLoading:f}=en(),{mutateAsync:h,isLoading:b}=eM(),{mutateAsync:g,isLoading:y}=eq(),{data:w,isLoading:N}=ee({projectRef:l,sourceId:n}),{data:S}=ek({projectRef:l,destinationId:null==i?void 0:i.destinationId}),{data:E}=eP({projectRef:l,pipelineId:null==i?void 0:i.pipelineId}),A=u||m||f||y||b||f,_=!!i,C="destination-editor",I=em.k5(["BigQuery"]),k=em.Ik({type:I,name:em.Yj().min(1,"Name is required"),projectId:em.Yj().min(1,"Project id is required"),datasetId:em.Yj().min(1,"Dataset id is required"),serviceAccountKey:em.Yj().min(1,"Service account key is required"),publicationName:em.Yj().min(1,"Publication is required"),maxSize:em.ai().min(1,"Max Size must be greater than 0").int(),maxFillMs:em.ai().min(1,"Max Fill milliseconds should be greater than 0").int(),maxStalenessMins:em.ai().nonnegative(),enabled:em.zM()}),R=(0,s.useMemo)(()=>{var e,t,n,a,s,r,l,o,c,d,u,p,m,x,f,h,b,g,y,j,v;return{type:I.enum.BigQuery,name:null!=(m=null==S?void 0:S.name)?m:"",projectId:null!=(x=null==S||null==(t=S.config)||null==(e=t.big_query)?void 0:e.project_id)?x:"",datasetId:null!=(f=null==S||null==(a=S.config)||null==(n=a.big_query)?void 0:n.dataset_id)?f:"",serviceAccountKey:null!=(h=null==S||null==(r=S.config)||null==(s=r.big_query)?void 0:s.service_account_key)?h:"",publicationName:null!=(b=null==E?void 0:E.config.publication_name)?b:"",maxSize:null!=(g=null==E||null==(o=E.config)||null==(l=o.batch)?void 0:l.max_size)?g:1e3,maxFillMs:null!=(y=null==E||null==(d=E.config)||null==(c=d.batch)?void 0:c.max_fill_ms)?y:10,maxStalenessMins:null!=(j=null==S||null==(p=S.config)||null==(u=p.big_query)?void 0:u.max_staleness_mins)?j:5,enabled:null==(v=null==i?void 0:i.enabled)||v}},[S,E,i]),P=(0,ea.mN)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,$.u)(k),defaultValues:R}),T=async e=>{if(!l)return console.error("Project ref is required");try{if(_&&i){if(!n)return void console.error("Source id is required");if(!i.pipelineId)return void console.error("Pipeline id is required");await g({destinationId:i.destinationId,pipelineId:i.pipelineId,projectRef:l,destinationName:e.name,destinationConfig:{bigQuery:{projectId:e.projectId,datasetId:e.datasetId,serviceAccountKey:e.serviceAccountKey,maxStalenessMins:e.maxStalenessMins}},pipelineConfig:{publicationName:e.publicationName,batch:{maxSize:e.maxSize,maxFillMs:e.maxFillMs}},sourceId:n}),e.enabled?await x({projectRef:l,pipelineId:i.pipelineId}):await h({projectRef:l,pipelineId:i.pipelineId}),G.oR.success("Successfully updated destination")}else{if(!n)return void console.error("Source id is required");let{pipeline_id:t}=await p({projectRef:l,destinationName:e.name,destinationConfig:{bigQuery:{projectId:e.projectId,datasetId:e.datasetId,serviceAccountKey:e.serviceAccountKey,maxStalenessMins:e.maxStalenessMins}},sourceId:n,pipelineConfig:{publicationName:e.publicationName,batch:{maxSize:e.maxSize,maxFillMs:e.maxFillMs}}});e.enabled&&await x({projectRef:l,pipelineId:t}),G.oR.success("Successfully created destination")}r()}catch(e){G.oR.error("Failed to ".concat(_?"update":"create"," destination"))}},D=async()=>{if(!l)return console.error("Project ref is required");await d({projectRef:l})},{enabled:L}=P.watch();return(0,s.useEffect)(()=>{_&&S&&E&&P.reset(R)},[S,E,_,R,P]),(0,a.jsx)(a.Fragment,{children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(es.cj,{open:t,onOpenChange:r,children:(0,a.jsx)(es.h,{showClose:!1,size:"default",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",tabIndex:-1,children:[(0,a.jsxs)(es.Fm,{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(es.qp,{children:_?"Edit Destination":"New Destination"}),(0,a.jsx)(es.Qs,{children:_?null:"Send data to a new destination"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(er.d,{checked:L,onCheckedChange:e=>{P.setValue("enabled",e)}}),(0,a.jsx)(ei.J,{className:"text-sm mx-2",children:"Enable"})]})]}),(0,a.jsx)(es.Xc,{className:"flex-grow overflow-auto",children:(0,a.jsx)(el.lV,{...P,children:(0,a.jsxs)("form",{id:C,onSubmit:P.handleSubmit(T),children:[(0,a.jsx)(el.zB,{control:P.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{className:"mb-8",label:"Name",layout:"vertical",description:"A name you will use to identify this destination",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(v.p,{...t,placeholder:"Name"})})})}}),(0,a.jsx)("h3",{className:"mb-4",children:"What data to send"}),(0,a.jsx)(el.zB,{control:P.control,name:"publicationName",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{className:"mb-4",label:"Publication",layout:"vertical",description:"A publication is a collection of tables that you want to replicate ",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(ej,{publications:(null==w?void 0:w.map(e=>e.name))||[],loading:N,field:t,onNewPublicationClick:()=>c(!0)})})})}}),(0,a.jsx)("h3",{className:"mb-4 mt-8",children:"Where to send that data"}),(0,a.jsx)(el.zB,{name:"type",control:P.control,render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{className:"mb-4",label:"Type",layout:"vertical",description:"The type of destination to send the data to",children:(0,a.jsx)(el.MJ,{children:(0,a.jsxs)(eo.l6,{value:t.value,children:[(0,a.jsx)(eo.bq,{children:t.value}),(0,a.jsx)(eo.gC,{children:(0,a.jsx)(eo.s3,{children:(0,a.jsx)(eo.eb,{value:"BigQuery",children:"BigQuery"})})})]})})})}}),(0,a.jsx)(el.zB,{control:P.control,name:"projectId",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{className:"mb-4",label:"Project Id",layout:"vertical",description:"Which BigQuery project to send data to",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(v.p,{...t,placeholder:"Project id"})})})}}),(0,a.jsx)(el.zB,{control:P.control,name:"datasetId",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{className:"mb-4",label:"Project's Dataset Id",layout:"vertical",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(v.p,{...t,placeholder:"Dataset id"})})})}}),(0,a.jsx)(el.zB,{control:P.control,name:"serviceAccountKey",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{label:"Service Account Key",layout:"vertical",description:"The service account key for BigQuery",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(ec.f,{...t,rows:4,maxLength:5e3,placeholder:"Service account key"})})})}}),(0,a.jsx)(ed.nD,{type:"single",collapsible:!0,children:(0,a.jsxs)(ed.As,{value:"item-1",className:"border-none",children:[(0,a.jsx)(ed.$m,{className:"font-normal gap-2 justify-start mb-0 mt-8",children:"Advanced Settings"}),(0,a.jsxs)(ed.ub,{asChild:!0,className:"!pb-0",children:[(0,a.jsx)(el.zB,{control:P.control,name:"maxSize",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{className:"mb-4",label:"Max Size",layout:"vertical",description:"The maximum size of the data to send",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(v.p,{...t,type:"number",...P.register("maxSize",{valueAsNumber:!0}),placeholder:"Max size"})})})}}),(0,a.jsx)(el.zB,{control:P.control,name:"maxFillMs",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{className:"mb-4",label:"Max Fill Seconds",layout:"vertical",description:"The maximum amount of time to fill the data",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(v.p,{...t,type:"number",...P.register("maxFillMs",{valueAsNumber:!0}),placeholder:"Max fill seconds"})})})}}),(0,a.jsx)(el.zB,{control:P.control,name:"maxStalenessMins",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{className:"mb-4",label:"Max Staleness",layout:"vertical",description:"Maximum staleness time allowed",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(v.p,{...t,type:"number",...P.register("maxStalenessMins",{valueAsNumber:!0}),placeholder:"Max staleness in minutes"})})})}})]})]})}),(0,a.jsx)("div",{className:"hidden",children:(0,a.jsx)(el.zB,{control:P.control,name:"enabled",render:e=>{let{field:t}=e;return(0,a.jsx)(e_.M,{className:"mb-4",layout:"vertical",label:"Enabled",children:(0,a.jsx)(el.MJ,{children:(0,a.jsx)(er.d,{checked:t.value,onCheckedChange:t.onChange})})})}})})]})})}),(0,a.jsxs)(es.XW,{children:[(0,a.jsx)(j.$,{disabled:A,type:"default",onClick:r,children:"Cancel"}),(0,a.jsx)(j.$,{disabled:A,loading:A,form:C,htmlType:"submit",children:_?"Update":"Create"})]})]})})}),(0,a.jsx)(eC,{visible:o,sourceId:n,onClose:()=>c(!1)})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(es.cj,{open:t,onOpenChange:r,children:(0,a.jsx)(es.h,{showClose:!1,size:"default",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",tabIndex:-1,children:[(0,a.jsx)(es.Fm,{children:(0,a.jsx)(es.qp,{children:"New Destination"})}),(0,a.jsx)(es.Xc,{className:"flex-grow overflow-auto",children:(0,a.jsxs)(eu.Fc,{children:[(0,a.jsx)(ep.id,{}),(0,a.jsx)(eu.XL,{children:"Enabling replication will cost additional $xx.xx"}),(0,a.jsxs)(eu.TN,{children:[(0,a.jsx)("span",{}),(0,a.jsx)("div",{className:"flex items-center gap-x-2 mt-3",children:(0,a.jsx)(j.$,{type:"default",onClick:D,children:"Enable replication"})})]})]})}),(0,a.jsx)(es.XW,{children:(0,a.jsx)(j.$,{disabled:A,type:"default",onClick:r,children:"Cancel"})})]})})})})})};async function eF(e,t){let{projectRef:n,destinationId:a}=e;if(!n)throw Error("projectRef is required");let{data:s,error:r}=await (0,z.yH)("/platform/replication/{ref}/destinations/{destination_id}",{params:{path:{ref:n,destination_id:a}},signal:t});return r&&(0,z.H4)(r),s}let eO=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,W.jE)();return(0,X.n)(e=>eF(e),{async onSuccess(t,n,s){let{projectRef:r,destinationId:i}=n;await a.invalidateQueries(q.destinations(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?G.oR.error("Failed to delete destination: ".concat(e.message)):t(e,n,a)},...n})};async function eV(e,t){let{projectRef:n,pipelineId:a}=e;if(!n)throw Error("projectRef is required");if(!a)throw Error("pipelineId is required");let{data:s,error:r}=await (0,z.Jt)("/platform/replication/{ref}/pipelines/{pipeline_id}/status",{params:{path:{ref:n,pipeline_id:a}},signal:t});return r&&(0,z.H4)(r),s}let eU=function(e){let{projectRef:t,pipelineId:n}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,L.I)(q.pipelinesStatus(t,n),e=>{let{signal:a}=e;return eV({projectRef:t,pipelineId:n},a)},{enabled:a&&void 0!==t&&void 0!==n,...s})};var eH=function(e){return e.None="None",e.EnableRequested="EnableRequested",e.DisableRequested="DisableRequested",e}({});let eQ=(0,s.createContext)(void 0),eJ=e=>{let{children:t}=e,[n,r]=(0,s.useState)({}),i=(e,t)=>{r(n=>({...n,[e]:t}))},l=(0,s.useCallback)((e,t)=>{let a=n[e]||"None";("EnableRequested"===a&&("started"===t||"failed"===t)||"DisableRequested"===a&&("stopped"===t||"failed"===t))&&i(e,"None")},[n,i]);return(0,a.jsx)(eQ.Provider,{value:{requestStatus:n,setRequestStatus:i,getRequestStatus:e=>n[e]||"None",updatePipelineStatus:l},"data-sentry-element":"unknown","data-sentry-component":"PipelineRequestStatusProvider","data-sentry-source-file":"replication-pipeline-request-status.tsx",children:t})},e$=()=>{let e=(0,s.useContext)(eQ);if(void 0===e)throw Error("usePipelineRequestStatus must be used within a PipelineRequestStatusProvider");return e};var eW=n(20168);let eX=e=>{let{visible:t,setVisible:n,onDelete:s,isLoading:r,name:i}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eW.A,{variant:"warning",visible:t,onCancel:()=>n(!t),onConfirm:s,title:"Delete this destination",loading:r,confirmLabel:"Delete destination",confirmPlaceholder:"Type in name of destination",confirmString:null!=i?i:"Unknown",text:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"This will delete the destination"})," "]}),alert:{title:"You cannot recover this destination once deleted."},"data-sentry-element":"TextConfirmModal","data-sentry-source-file":"DeleteDestination.tsx"})})},eG={RETRIEVE_PIPELINE:"Failed to retrieve pipeline information",RETRIEVE_PIPELINE_STATUS:"Failed to retrieve pipeline status",RETRIEVE_REPLICATION_STATUS:"Failed to retrieve table replication status",RETRIEVE_DESTINATIONS:"Failed to retrieve destinations",ENABLE_DESTINATION:"Failed to enable destination",DISABLE_DESTINATION:"Failed to disable destination",DELETE_DESTINATION:"Failed to delete destination",NO_PIPELINE_FOUND:"No pipeline found",COPY_TABLE_STATUS:"Failed to copy table status"},eK=e=>{if(e&&"object"==typeof e&&"name"in e)return e.name},eY={enabling:{title:"Pipeline Enabling",message:"Starting the pipeline. Table replication will resume once enabled.",badge:"Enabling"},disabling:{title:"Pipeline Disabling",message:"Stopping the pipeline. Table replication will be paused once disabled.",badge:"Disabling"},failed:{title:"Pipeline Failed",message:"Replication has encountered an error. Check the logs for details.",badge:"Failed"},stopped:{title:"Pipeline Stopped",message:"Replication is paused. Enable the pipeline to resume data synchronization.",badge:"Stopped"},starting:{title:"Pipeline Starting",message:"Initializing replication. Table status will be available once running.",badge:"Starting"},running:{title:"Pipeline Running",message:"Replication is active and processing data",badge:"Running"},unknown:{title:"Pipeline Status Unknown",message:"Unable to determine replication status. Check the logs for more information.",badge:"Unknown"},notRunning:{title:"Pipeline Not Running",message:"Replication is not active. Enable the pipeline to start data synchronization.",badge:"Disabled"}},eZ=(e,t)=>{if(e===eH.EnableRequested)return eY.enabling;if(e===eH.DisableRequested)return eY.disabling;switch(t){case"failed":return eY.failed;case"stopped":return eY.stopped;case"starting":return eY.starting;case"started":return eY.running;case"unknown":return eY.unknown;default:return eY.notRunning}};var e0=n(70758),e1=n(78721),e2=function(e){return e.FAILED="failed",e.STARTING="starting",e.STARTED="started",e.STOPPED="stopped",e.UNKNOWN="unknown",e}({});let e4=e=>{let{pipelineStatus:t,error:n,isLoading:s,isError:r,isSuccess:i,requestStatus:l}=e,o=e=>null!=e&&"object"==typeof e&&"failed"===e.name,c=(()=>{let e=eZ(l,t&&"object"==typeof t&&"name"in t?t.name:void 0);if(l===eH.EnableRequested)return{label:"Enabling...",dot:(0,a.jsx)(ef.A,{className:"animate-spin w-3 h-3 text-brand-600"}),color:"text-brand-600",tooltip:e.message};if(l===eH.DisableRequested)return{label:"Disabling...",dot:(0,a.jsx)(ef.A,{className:"animate-spin w-3 h-3 text-warning-600"}),color:"text-warning-600",tooltip:e.message};if(o(t))return{isFailedStatus:!0};if(t&&"object"==typeof t&&"name"in t)switch(t.name){case"starting":return{label:"Starting",dot:(0,a.jsx)(ef.A,{className:"animate-spin w-3 h-3 text-warning-600"}),color:"text-warning-600",tooltip:e.message};case"started":return{label:"Running",dot:(0,a.jsx)("div",{className:"w-2 h-2 bg-brand-600 rounded-full"}),color:"text-brand-600",tooltip:e.message};case"stopped":return{label:"Stopped",dot:(0,a.jsx)("div",{className:"w-2 h-2 bg-foreground-lighter rounded-full"}),color:"text-foreground-light",tooltip:e.message};case"unknown":return{label:"Unknown",dot:(0,a.jsx)("div",{className:"w-2 h-2 bg-warning-600 rounded-full"}),color:"text-warning-600",tooltip:e.message};default:return{label:"Unknown",dot:(0,a.jsx)("div",{className:"w-2 h-2 bg-destructive-600 rounded-full"}),color:"text-destructive-600",tooltip:e.message}}return{label:"Unknown",dot:(0,a.jsx)("div",{className:"w-2 h-2 bg-destructive-600 rounded-full"}),color:"text-destructive-600",tooltip:"Pipeline status is unclear - check logs for details"}})();return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(J.A,{}),r&&(0,a.jsx)(D.A,{error:n,subject:eG.RETRIEVE_PIPELINE_STATUS}),i&&(0,a.jsx)(a.Fragment,{children:c.isFailedStatus?(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)(e1.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"renderFailedStatus","data-sentry-source-file":"PipelineStatus.tsx",children:[(0,a.jsx)(e1.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"PipelineStatus.tsx",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[(0,a.jsx)(e0.A,{className:"w-3 h-3","data-sentry-element":"AlertTriangle","data-sentry-source-file":"PipelineStatus.tsx"}),(0,a.jsx)("span",{children:"Failed"})]})}),(0,a.jsx)(e1.ZI,{side:"bottom","data-sentry-element":"TooltipContent","data-sentry-source-file":"PipelineStatus.tsx",children:eZ(l,"failed").message})]})}):(0,a.jsxs)(e1.m_,{children:[(0,a.jsx)(e1.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:(0,Q.cn)("flex items-center gap-2 text-sm w-min",c.color),children:[c.dot,(0,a.jsx)("span",{children:c.label})]})}),(0,a.jsx)(e1.ZI,{side:"bottom",children:c.tooltip})]})})]})};var e3=n(84357),e6=n(10819),e5=n(11192),e9=n(17089),e8=n(71139);let e7=e=>{let{pipeline:t,pipelineStatus:n,error:s,isLoading:r,isError:i,onEditClick:l,onDeleteClick:o}=e,{ref:c}=(0,M.g)(),d=(e=>e&&"object"==typeof e&&"name"in e?e.name:e)(n)!==e2.STOPPED,{mutateAsync:p}=en(),{mutateAsync:m}=eM(),{setRequestStatus:x}=e$(),f=async()=>{if(!c)return console.error("Project ref is required");if(!t)return G.oR.error(eG.NO_PIPELINE_FOUND);try{await p({projectRef:c,pipelineId:t.id}),(0,G.oR)("Enabling pipeline ".concat(t.destination_name)),x(t.id,eH.EnableRequested)}catch(e){G.oR.error(eG.ENABLE_DESTINATION)}},h=async()=>{if(!c)return void console.error("Project ref is required");if(!t)return void G.oR.error(eG.NO_PIPELINE_FOUND);try{await m({projectRef:c,pipelineId:t.id}),(0,G.oR)("Disabling pipeline ".concat(t.destination_name)),x(t.id,eH.DisableRequested)}catch(e){G.oR.error(eG.DISABLE_DESTINATION)}};return(0,a.jsxs)("div",{className:"flex justify-end items-center space-x-2","data-sentry-component":"RowMenu","data-sentry-source-file":"RowMenu.tsx",children:[r&&(0,a.jsx)(J.A,{}),i&&(0,a.jsx)(D.A,{error:s,subject:eG.RETRIEVE_PIPELINE_STATUS}),(0,a.jsxs)(e8.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"RowMenu.tsx",children:[(0,a.jsx)(e8.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"RowMenu.tsx",children:(0,a.jsx)(j.$,{type:"default",className:"px-1.5",icon:(0,a.jsx)(u.A,{}),onClick:e=>e.stopPropagation(),"data-sentry-element":"Button","data-sentry-source-file":"RowMenu.tsx"})}),(0,a.jsxs)(e8.SQ,{side:"bottom",align:"end",className:"w-52","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"RowMenu.tsx",children:[d?(0,a.jsxs)(e8._2,{className:"space-x-2",onClick:e=>{e.stopPropagation(),h()},children:[(0,a.jsx)(e3.A,{size:14}),(0,a.jsx)("p",{children:"Disable pipeline"})]}):(0,a.jsxs)(e8._2,{className:"space-x-2",onClick:e=>{e.stopPropagation(),f()},children:[(0,a.jsx)(e6.A,{size:14}),(0,a.jsx)("p",{children:"Enable pipeline"})]}),(0,a.jsx)(e8.mB,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"RowMenu.tsx"}),(0,a.jsxs)(e8._2,{className:"space-x-2",onClick:e=>{e.stopPropagation(),l()},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"RowMenu.tsx",children:[(0,a.jsx)(e5.A,{size:14,"data-sentry-element":"Edit","data-sentry-source-file":"RowMenu.tsx"}),(0,a.jsx)("p",{children:"Edit destination"})]}),(0,a.jsxs)(e8._2,{className:"space-x-2",onClick:e=>{e.stopPropagation(),o()},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"RowMenu.tsx",children:[(0,a.jsx)(e9.A,{stroke:"red",size:14,"data-sentry-element":"Trash","data-sentry-source-file":"RowMenu.tsx"}),(0,a.jsx)("p",{children:"Delete destination"})]})]})]})]})},te=e=>{let{sourceId:t,destinationId:n,destinationName:r,type:i,pipeline:l,error:o,isLoading:c,isError:d,isSuccess:u,onSelectPipeline:p}=e,{ref:m}=(0,M.g)(),[x,f]=(0,s.useState)(!1),[h,b]=(0,s.useState)(!1),{data:y,error:j,isLoading:v,isError:w,isSuccess:N}=eU({projectRef:m,pipelineId:null==l?void 0:l.id},{refetchInterval:2e3}),{getRequestStatus:S,updatePipelineStatus:E}=e$(),A=(null==l?void 0:l.id)?S(l.id):eH.None,{mutateAsync:_}=eM(),{mutateAsync:C}=eO({}),I=eK(null==y?void 0:y.status),k=async()=>{if(!m)return console.error("Project ref is required");if(!l)return G.oR.error(eG.NO_PIPELINE_FOUND);try{await _({projectRef:m,pipelineId:l.id}),await C({projectRef:m,destinationId:n})}catch(e){G.oR.error(eG.DELETE_DESTINATION)}};return(0,s.useEffect)(()=>{(null==l?void 0:l.id)&&E(l.id,I)},[null==l?void 0:l.id,I,E]),(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)(D.A,{error:o,subject:eG.RETRIEVE_PIPELINE}),u&&(0,a.jsxs)(g.A.tr,{className:"hover:!bg-surface-200 transition",onClick:()=>{l&&(null==p||p(l.id,r))},children:[(0,a.jsx)(g.A.td,{children:c?(0,a.jsx)(J.A,{}):r}),(0,a.jsx)(g.A.td,{children:c?(0,a.jsx)(J.A,{}):i}),(0,a.jsx)(g.A.td,{children:c||!l?(0,a.jsx)(J.A,{}):(0,a.jsx)(e4,{pipelineStatus:null==y?void 0:y.status,error:j,isLoading:v,isError:w,isSuccess:N,requestStatus:A})}),(0,a.jsx)(g.A.td,{children:c||!l?(0,a.jsx)(J.A,{}):l.config.publication_name}),(0,a.jsx)(g.A.td,{children:(0,a.jsx)("div",{className:"flex items-center justify-end gap-x-2",children:(0,a.jsx)(e7,{pipeline:l,pipelineStatus:null==y?void 0:y.status,error:j,isLoading:v,isError:w,onDeleteClick:()=>f(!0),onEditClick:()=>b(!0)})})})]}),(0,a.jsx)(eX,{visible:x,setVisible:f,onDelete:k,isLoading:v,name:r,"data-sentry-element":"DeleteDestination","data-sentry-source-file":"DestinationRow.tsx"}),(0,a.jsx)(eB,{visible:h,onClose:()=>b(!1),sourceId:t,existingDestination:{sourceId:t,destinationId:n,pipelineId:null==l?void 0:l.id,enabled:I===e2.STARTED},"data-sentry-element":"DestinationPanel","data-sentry-source-file":"DestinationRow.tsx"})]})},tt=e=>{var t,n,r;let{onSelectPipeline:i=T()}=e,[l,c]=(0,s.useState)(!1),[u,p]=(0,s.useState)(""),{ref:m}=(0,M.g)(),{data:x,error:f,isLoading:h,isError:b}=H({projectRef:m}),y=null==x||null==(t=x.sources.find(e=>e.name===m))?void 0:t.id,{data:w,error:N,isLoading:S,isError:E,isSuccess:A}=F({projectRef:m}),{data:_,error:C,isLoading:I,isError:k,isSuccess:R}=V({projectRef:m}),P=A&&w.destinations.length>0,L=0===u.length?null!=(n=null==w?void 0:w.destinations)?n:[]:(null!=(r=null==w?void 0:w.destinations)?r:[]).filter(e=>e.name.toLowerCase().includes(u.toLowerCase()));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground-lighter",size:14,"data-sentry-element":"Search","data-sentry-source-file":"Destinations.tsx"}),(0,a.jsx)(v.p,{className:"pl-9 h-7",placeholder:"Filter destinations",value:u,onChange:e=>p(e.target.value),"data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"Destinations.tsx"})]})}),(0,a.jsx)(j.$,{type:"default",icon:(0,a.jsx)(o.A,{}),onClick:()=>c(!0),"data-sentry-element":"Button","data-sentry-source-file":"Destinations.tsx",children:"Add destination"})]})}),(0,a.jsxs)("div",{className:"w-full overflow-hidden overflow-x-auto",children:[(h||S)&&(0,a.jsx)(J.y,{}),(b||E)&&(0,a.jsx)(D.A,{error:f||N,subject:eG.RETRIEVE_DESTINATIONS}),P?(0,a.jsx)(g.A,{head:[(0,a.jsx)(g.A.th,{children:"Name"},"name"),(0,a.jsx)(g.A.th,{children:"Type"},"type"),(0,a.jsx)(g.A.th,{children:"Status"},"status"),(0,a.jsx)(g.A.th,{children:"Publication"},"publication"),(0,a.jsx)(g.A.th,{},"actions")],body:L.map(e=>{let t=null==_?void 0:_.pipelines.find(t=>t.destination_id===e.id);return(0,a.jsx)(te,{sourceId:y,destinationId:e.id,destinationName:e.name,type:e.config.big_query?"BigQuery":"Other",pipeline:t,error:C,isLoading:I,isError:k,isSuccess:R,onSelectPipeline:i},e.id)})}):!h&&!S&&!b&&!E&&(0,a.jsxs)("div",{className:(0,Q.cn)("w-full","border border-dashed bg-surface-100 border-overlay","flex flex-col px-10 rounded-lg justify-center items-center py-8 mt-4"),children:[(0,a.jsx)("h4",{className:"text-lg",children:"Send data to your first destination"}),(0,a.jsx)("p",{className:"prose text-sm text-center mt-2",children:"Use destinations to improve performance or run analysis on your data via integrations like BigQuery"}),(0,a.jsx)(j.$,{icon:(0,a.jsx)(o.A,{}),onClick:()=>c(!0),className:"mt-6",children:"Add destination"})]})]}),!h&&!S&&0===L.length&&P&&(0,a.jsx)("div",{className:"text-center py-8 text-foreground-light",children:(0,a.jsxs)("p",{children:['No destinations match "',u,'"']})}),(0,a.jsx)(eB,{visible:l,sourceId:y,onClose:()=>c(!1),"data-sentry-element":"NewDestinationPanel","data-sentry-source-file":"Destinations.tsx"})]})};var tn=n(99846),ta=n(23445),ts=n(29012),tr=n(40260),ti=n(88602);async function tl(e,t){let{projectRef:n,pipelineId:a}=e;if(!n)throw Error("projectRef is required");if(!a)throw Error("pipelineId is required");let{data:s,error:r}=await (0,z.Jt)("/platform/replication/{ref}/pipelines/{pipeline_id}/replication-status",{params:{path:{ref:n,pipeline_id:a}},signal:t});return r&&(0,z.H4)(r),s}let to=function(e){let{projectRef:t,pipelineId:n}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,L.I)(q.pipelinesReplicationStatus(t,n),e=>{let{signal:a}=e;return tl({projectRef:t,pipelineId:n},a)},{enabled:a&&void 0!==t&&void 0!==n,...s})};var tc=n(52647),td=n(2119),tu=n(74680),tp=n(17233),tm=n(63159);let tx=e=>{switch(e.name){case"queued":return{badge:(0,a.jsx)(td.E,{variant:"warning",children:"Queued"}),description:"Waiting to start replication",color:"text-warning-600"};case"copying_table":return{badge:(0,a.jsx)(td.E,{variant:"brand",children:"Copying"}),description:"Initial data copy in progress",color:"text-brand-600"};case"copied_table":return{badge:(0,a.jsx)(td.E,{variant:"success",children:"Copied"}),description:"Initial copy completed",color:"text-success-600"};case"following_wal":return{badge:(0,a.jsx)(td.E,{variant:"success",children:"Live"}),description:"Replicating live changes",color:"text-success-600"};case"error":return{badge:(0,a.jsx)(td.E,{variant:"destructive",children:"Error"}),description:e.message,color:"text-destructive-600"};default:return{badge:(0,a.jsx)(td.E,{variant:"warning",children:"Unknown"}),description:"Unknown status",color:"text-warning-600"}}},tf=e=>{let{requestStatus:t,statusName:n}=e,{title:s,message:r,badge:i}=eZ(t,n),l=t===eH.EnableRequested,o=t===eH.DisableRequested;return{title:s,message:r,badge:i,icon:l||o?(0,a.jsx)(ef.A,{className:"w-6 h-6 animate-spin"}):"failed"===n?(0,a.jsx)(tu.A,{className:"w-6 h-6"}):"starting"===n?(0,a.jsx)(tp.A,{className:"w-6 h-6"}):"unknown"===n?(0,a.jsx)(tm.A,{className:"w-6 h-6"}):(0,a.jsx)(tr.A,{className:"w-6 h-6"}),colors:l?{bg:"bg-brand-50",text:"text-brand-900",subtext:"text-brand-700",iconBg:"bg-brand-600",icon:"text-white dark:text-black"}:o||"starting"===n||"unknown"===n?{bg:"bg-warning-50",text:"text-warning-900",subtext:"text-warning-700",iconBg:"bg-warning-600",icon:"text-white dark:text-black"}:"failed"===n?{bg:"bg-destructive-50",text:"text-destructive-900",subtext:"text-destructive-700",iconBg:"bg-destructive-600",icon:"text-white dark:text-black"}:{bg:"bg-surface-100",text:"text-foreground",subtext:"text-foreground-light",iconBg:"bg-foreground-lighter",icon:"text-white dark:text-black"}}},th=e=>{let{pipelineId:t,destinationName:n,onSelectBack:r}=e,{ref:i}=(0,M.g)(),[l,o]=(0,s.useState)(""),{getRequestStatus:c,updatePipelineStatus:u,setRequestStatus:p}=e$(),m=c(t),{data:f,error:h,isLoading:b,isError:y}=eP({projectRef:i,pipelineId:t}),{data:w,error:N,isLoading:S,isError:E,isSuccess:A}=eU({projectRef:i,pipelineId:t},{enabled:!!t,refetchInterval:2e3}),{data:_,error:C,isLoading:I,isError:k}=to({projectRef:i,pipelineId:t},{enabled:!!t,refetchInterval:2e3}),{mutateAsync:R,isLoading:P}=en(),{mutateAsync:T,isLoading:L}=eM(),z=eK(null==w?void 0:w.status),q=tf({requestStatus:m,statusName:z}),B=(null==_?void 0:_.table_statuses)||[],F=0===l.length?B:B.filter(e=>e.table_name.toLowerCase().includes(l.toLowerCase())),O=B.filter(e=>"error"===e.state.name),V=O.length>0,U="started"===z,H=B.length>0,$=m===eH.EnableRequested||m===eH.DisableRequested,W=!U||$,X=async(e,t)=>{let n="Table: ".concat(e,"\nStatus: ").concat(t.name).concat("message"in t?"\nError: ".concat(t.message):"").concat("lag"in t?"\nLag: ".concat(t.lag,"ms"):"");try{await (0,tc.l)(n),G.oR.success("Table status copied to clipboard")}catch(e){G.oR.error(eG.COPY_TABLE_STATUS)}},K=async()=>{if(!i)return console.error("Project ref is required");if(!f)return G.oR.error(eG.NO_PIPELINE_FOUND);try{"stopped"===z?(await R({projectRef:i,pipelineId:f.id}),p(f.id,eH.EnableRequested)):"started"===z&&(await T({projectRef:i,pipelineId:f.id}),p(f.id,eH.DisableRequested))}catch(e){G.oR.error(eG.ENABLE_DESTINATION)}};return((0,s.useEffect)(()=>{u(t,z)},[t,z,u]),y)?(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,a.jsx)(j.$,{type:"outline",onClick:r,icon:(0,a.jsx)(tn.A,{}),style:{padding:"5px"}}),(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Pipeline Status"})]})}),(0,a.jsx)(D.A,{error:h,subject:eG.RETRIEVE_PIPELINE})]}):(0,a.jsxs)("div",{className:"space-y-4","data-sentry-component":"ReplicationPipelineStatus","data-sentry-source-file":"ReplicationPipelineStatus.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,a.jsx)(j.$,{type:"outline",onClick:r,icon:(0,a.jsx)(tn.A,{}),style:{padding:"5px"},"data-sentry-element":"Button","data-sentry-source-file":"ReplicationPipelineStatus.tsx"}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:n||"Pipeline"}),(0,a.jsx)(e4,{pipelineStatus:null==w?void 0:w.status,error:N,isLoading:S,isError:E,isSuccess:A,requestStatus:m,"data-sentry-element":"PipelineStatus","data-sentry-source-file":"ReplicationPipelineStatus.tsx"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.A,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-foreground-lighter",size:14,"data-sentry-element":"Search","data-sentry-source-file":"ReplicationPipelineStatus.tsx"}),(0,a.jsx)(v.p,{className:"pl-7 h-[26px] text-xs",placeholder:"Search for tables",value:l,onChange:e=>o(e.target.value),"data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"ReplicationPipelineStatus.tsx"})]}),(0,a.jsxs)(j.$,{type:"stopped"===z?"primary":"default",onClick:()=>K(),loading:P||L,disabled:!["failed","started","stopped"].includes(null!=z?z:""),"data-sentry-element":"Button","data-sentry-source-file":"ReplicationPipelineStatus.tsx",children:["stopped"===z?"Enable":"Disable"," pipeline"]})]})]}),(b||I)&&(0,a.jsx)(J.y,{}),k&&(0,a.jsx)(D.A,{error:C,subject:eG.RETRIEVE_REPLICATION_STATUS}),V&&(0,a.jsx)("div",{className:"p-4 border border-destructive-300 bg-destructive-100 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(e0.A,{className:"w-5 h-5 text-destructive-600 mt-0.5 shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("h4",{className:"font-medium text-destructive-900 mb-1",children:[O.length," table",O.length>1?"s":""," failed"]}),(0,a.jsx)("p",{className:"text-sm text-destructive-700 mb-3",children:"Some tables encountered replication errors. Check the logs for detailed error information."}),(0,a.jsx)(j.$,{asChild:!0,type:"outline",size:"tiny",icon:(0,a.jsx)(ta.A,{className:"w-3 h-3"}),className:"text-destructive-600 border-destructive-300 hover:bg-destructive-50",children:(0,a.jsx)(x(),{target:"_blank",rel:"noreferrer noopener",href:"/project/".concat(i,"/logs/postgres-logs"),children:"View Logs"})})]})]})}),H&&(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[W&&(0,a.jsx)("div",{className:(0,Q.cn)("p-4 border border-default rounded-lg flex items-center justify-between",q.colors.bg),children:(0,a.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,a.jsx)("div",{className:(0,Q.cn)("w-10 h-10 rounded-full flex items-center justify-center",q.colors.iconBg),children:(0,a.jsx)("div",{className:q.colors.icon,children:q.icon})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium ".concat(q.colors.text),children:q.title}),(0,a.jsx)("p",{className:"text-sm ".concat(q.colors.subtext),children:q.message})]})]})}),(0,a.jsx)("div",{className:"w-full overflow-hidden overflow-x-auto",children:(0,a.jsx)(g.A,{head:[(0,a.jsx)(g.A.th,{children:"Table"},"table"),(0,a.jsx)(g.A.th,{children:"Status"},"status"),(0,a.jsx)(g.A.th,{children:"Details"},"details"),(0,a.jsx)(g.A.th,{className:"w-16 text-center",children:"Actions"},"actions")],body:F.map((e,t)=>{let n=tx(e.state);return(0,a.jsxs)(g.A.tr,{className:"border-t",children:[(0,a.jsx)(g.A.td,{children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("p",{children:e.table_name}),(0,a.jsx)(ti.G,{asChild:!0,type:"text",className:"px-1.5",icon:(0,a.jsx)(ta.A,{}),tooltip:{content:{side:"bottom",text:"Open in Table Editor"}},children:(0,a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"/project/".concat(i,"/editor/").concat(e.table_id)})})]})}),(0,a.jsx)(g.A.td,{children:W?(0,a.jsx)(td.E,{variant:"default",children:"Not Available"}):n.badge}),(0,a.jsx)(g.A.td,{children:W?(0,a.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["Status unavailable while pipeline is ",q.badge.toLowerCase()]}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm text-foreground",children:n.description}),"lag"in e.state&&(0,a.jsxs)("div",{className:"text-xs text-foreground-light",children:["Lag: ",e.state.lag,"ms"]})]})}),(0,a.jsx)(g.A.td,{className:"text-center",children:(0,a.jsx)(ti.G,{type:"text",size:"tiny",icon:(0,a.jsx)(ts.A,{className:"w-3 h-3"}),className:"px-1.5",disabled:W,onClick:()=>X(e.table_name,e.state),tooltip:{content:{side:"bottom",text:W?"Copy unavailable while pipeline is ".concat(q.badge.toLowerCase()):"Copy status details"}}})})]},"".concat(e.table_name,"-").concat(t))})})})]}),0===F.length&&H&&(0,a.jsx)(g.A.tr,{children:(0,a.jsx)(g.A.td,{colSpan:4,children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',l,'" did not return any results']})]})})}),!I&&0===B.length&&(0,a.jsx)("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-sm mx-auto text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-surface-200 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(tr.A,{className:"w-8 h-8 text-foreground-lighter"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-foreground",children:W?"Pipeline Not Running":"No table status information"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light leading-relaxed",children:W?"The replication pipeline is currently ".concat(z||"not active",". Table status\n                information is not available while the pipeline is in this state."):"This pipeline doesn't have any table replication status data available yet. The status will appear here once replication begins."})]}),(0,a.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Data refreshes automatically every 2 seconds"})]})})]})};var tb=n(46221),tg=n(1356),ty=n(92512),tj=n(54660);let tv=()=>{let e=(0,tj._P)("enablePgReplicate"),[t,n]=(0,s.useState)(),[r,i]=(0,s.useState)();return(0,a.jsx)(a.Fragment,{children:e?(0,a.jsx)(eJ,{children:(0,a.jsx)(b.eh,{children:(0,a.jsx)(b.gu,{children:(0,a.jsxs)("div",{className:"col-span-12",children:[(0,a.jsx)(ty.M,{title:"Replication"}),void 0===t?(0,a.jsx)(tt,{onSelectPipeline:(e,t)=>{n(e),i(t)}}):(0,a.jsx)(th,{pipelineId:t,destinationName:r,onSelectBack:()=>{n(void 0),i(void 0)}})]})})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.eh,{children:(0,a.jsx)(b.gu,{children:(0,a.jsx)("div",{className:"col-span-12",children:(0,a.jsx)(ty.M,{title:"Replication",description:"Send data to other destinations"})})})}),(0,a.jsx)(E,{})]})})};tv.getLayout=e=>(0,a.jsx)(tg.A,{children:(0,a.jsx)(tb.A,{title:"Database Replication",children:e})});let tw=tv},39412:(e,t,n)=>{"use strict";n.d(t,{xf:()=>h,sD:()=>j,Oe:()=>w,DG:()=>v,hw:()=>b});var a=n(80263),s=n(25643),r=n(96572),i=n(80903),l=n(53239),o=n(79279),c=n(32682),d=n(51500),u=n(2119),p=n(61965);let m=l.createContext(null),x=(0,d.cn)("relative text-foreground-lighter text-left px-2 py-1.5 rounded","hover:text-foreground hover:!bg-overlay-hover w-full flex items-center space-x-2","peer-data-[value=true]:bg-overlay-hover peer-data-[value=true]:text-strong");function f(){let e=l.useContext(m);if(!e)throw Error("useMultiSelect must be used within a MultiSelectProvider");return e}function h(e){var t;let{values:n=[],onValuesChange:s,disabled:r,dir:i,size:o,className:c,children:u,...x}=e,f=l.useRef(null),[h,b]=l.useState(!1),[g,y]=l.useState(""),[j,v]=l.useState(-1),w=l.useCallback(e=>{n.includes(e)?s(n.filter(t=>t!==e)||[]):s([...n,e])},[n]);t=()=>{h&&b(!h)},(0,l.useEffect)(()=>{let e=e=>{!f.current||f.current.contains(e.target)||t(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[f,t]);let N=l.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":n.length>0&&0===g.length&&(-1!==j&&j<n.length?(s(n.filter(e=>e!==n[j])),v(j-1<0?0:j-1)):s(n.filter(e=>e!==n[n.length-1])));break;case"Escape":if(-1!==j?v(-1):b(!1),f.current){let e=f.current.querySelector('button[role="combobox"]');e&&e.focus()}break;case"Enter":b(!0)}},[n,g,j]);return(0,a.jsx)(m.Provider,{value:{values:n,toggleValue:w,onValuesChange:s,open:h,setOpen:b,inputValue:g,setInputValue:y,activeIndex:j,setActiveIndex:v,size:o||"small",disabled:r},"data-sentry-element":"unknown","data-sentry-component":"MultiSelector","data-sentry-source-file":"multi-select.tsx",children:(0,a.jsx)(p.uB,{ref:f,onKeyDown:N,className:(0,d.cn)("relative w-auto overflow-visible bg-transparent flex flex-col",c),dir:i,...x,"data-sentry-element":"Command","data-sentry-source-file":"multi-select.tsx",children:u})})}(0,o.F)("",{variants:{size:{...c.vs}},defaultVariants:{size:c.FE}});let b=l.forwardRef((e,t)=>{let{label:n,persistLabel:i=!1,className:o,deletableBadge:c=!0,badgeLimit:p=9999,showIcon:m=!0,mode:x="combobox",children:h,...b}=e,{activeIndex:g,values:j,setInputValue:v,toggleValue:w,disabled:N,setOpen:S}=f(),E=l.useRef(null);l.useImperativeHandle(t,()=>E.current);let A=l.useRef(null),_=l.useRef(null),[C,I]=l.useState([]),[k,R]=l.useState(0),[P,T]=l.useState(!1),M="wrap"===p,D="number"==typeof p,L="inline-combobox"===x;l.useEffect(()=>{(null==E?void 0:E.current)&&_.current&&(M?(I(j),R(0)):(I(j.slice(0,p)),R(Math.max(0,j.length-p))))},[j,p]);let z="rounded shrink-0 px-1.5",q=l.useCallback(e=>{S(!0),v(""),L&&(e.stopPropagation(),e.preventDefault(),setTimeout(()=>{var e;null==(e=A.current)||e.focus()},100))},[]);return(0,a.jsxs)("button",{ref:E,onClick:e=>!P&&q(e),disabled:N,type:"button",role:"combobox",className:(0,d.cn)("flex w-full min-w-[200px] min-h-[40px] items-center justify-between rounded-md border","border-alternative bg-foreground/[.026] px-3 py-2 text-sm","ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","hover:border-primary transition-colors duration-200",o),...b,children:[(0,a.jsxs)("div",{ref:_,className:(0,d.cn)("flex gap-1 -ml-1 overflow-hidden flex-1",M&&"flex-wrap",!M&&"overflow-x-auto scrollbar-thin scrollbar-track-transparent transition-colors scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted scrollbar-thumb-rounded-lg"),children:[C.map(e=>(0,a.jsxs)(u.E,{className:z,children:[e,c&&(0,a.jsx)("div",{onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onClick:t=>{t.stopPropagation(),w(e),T(!1)},className:"ml-1 text-foreground-lighter hover:text-foreground-light transition-colors pointer-events-auto",children:(0,a.jsx)(s.A,{size:12})})]},e)),k>0&&(0,a.jsx)(u.E,{className:z,children:D&&p<1?"".concat(k," item").concat(k>1?"s":""," selected"):"+".concat(k)}),(0,a.jsx)("span",{className:(0,d.cn)("text-foreground-muted whitespace-nowrap leading-[1.375rem] ml-1 opacity-0 transition-opacity hidden",!L&&(i||0===j.length)&&"opacity-100 visible inline"),children:n}),L&&(0,a.jsx)(y,{ref:A,showSearchIcon:!1,onValueChange:-1===g?v:void 0,placeholder:n,autoFocus:!1,wrapperClassName:(0,d.cn)("px-0 flex-1 border-none truncate",M&&"min-w-[85px]"),className:"py-0 px-1 truncate"})]}),m&&(0,a.jsx)(r.A,{size:16,strokeWidth:2,className:"text-foreground-lighter shrink-0 ml-1.5"})]})});b.displayName="MultiSelectorTrigger",h.Trigger=b;let g=(0,o.F)("bg-control border",{variants:{size:{...c.vs}},defaultVariants:{size:c.FE}}),y=l.forwardRef((e,t)=>{let{className:n,wrapperClassName:s,showResetIcon:r,showSearchIcon:i,...o}=e,{open:c,setOpen:u,inputValue:m,setInputValue:x,activeIndex:h,setActiveIndex:b,size:y,disabled:j}=f(),v=l.useRef(null);l.useImperativeHandle(t,()=>v.current);let w=()=>{setTimeout(()=>{(null==v?void 0:v.current)&&c&&v.current.focus()},100)};return(0,l.useEffect)(()=>{if(w(),!c){var e;null==(e=v.current)||e.blur()}},[c]),(0,a.jsx)(p.G7,{ref:v,value:m,onValueChange:-1===h?x:void 0,onFocus:()=>u(!0),onClick:()=>b(-1),tabIndex:c?0:-1,disabled:j,showSearchIcon:i,showResetIcon:r,handleReset:()=>{x(""),w()},wrapperClassName:s,className:(0,d.cn)(g({size:y}),"text-sm bg-transparent h-full flex-grow border-none outline-none placeholder:text-foreground-muted flex-1",-1!==h&&"caret-transparent",n),...o})});y.displayName="MultiSelectorInput",h.Input=y;let j=l.forwardRef((e,t)=>{let{className:n,children:s}=e,{open:r}=f();return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("absolute w-full bg-overlay shadow-md z-10 border border-overlay top-[calc(100%+0.25rem)] rounded-md transition-all -translate-y-3",r?"opacity-100 translate-y-0 visible duration-150 ease-[.76,0,.23,1]":"opacity-0 -translate-y-3 invisible duration-0",n),children:r&&s})});j.displayName="MultiSelectorContent",h.Content=j;let v=l.forwardRef((e,t)=>{let{className:n,children:s,creatable:r=!1}=e,{open:i,inputValue:l,setInputValue:o,toggleValue:c}=f(),u=s?Array.isArray(s)?s:"object"==typeof s&&"props"in s?s.props.children:[]:[],m=u.filter(e=>!!e.props.value).map(e=>e.props.value.toLowerCase()).some(e=>e===l.toLowerCase());return(0,a.jsxs)(p.oI,{ref:t,className:(0,d.cn)("p-2 flex flex-col gap-2 scrollbar-thin scrollbar-track-transparent transition-colors","scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted","scrollbar-thumb-rounded-lg w-full max-h-[300px] overflow-y-auto",n),children:[s,r&&l.length>0&&!m?(0,a.jsxs)(p.h_,{role:"option",onSelect:()=>{i&&c(l),o("")},className:x,children:['Create "',l,'"']}):r&&0===u.length?(0,a.jsx)("div",{className:"p-2 py-1.5 text-xs text-foreground-lighter font-italic",children:"Type to add a value"}):(0,a.jsx)(p.xL,{children:(0,a.jsx)("span",{className:"text-foreground-muted",children:"No results found"})})]})});v.displayName="MultiSelectorList",h.List=v;let w=l.forwardRef((e,t)=>{let{className:n,value:s,children:r,...l}=e,{values:o,setInputValue:c,toggleValue:u,open:m}=f(),h=o.includes(s);return(0,a.jsxs)(p.h_,{ref:t,tabIndex:m?0:-1,role:"option",onSelect:()=>{m&&u(s),c("")},className:(0,d.cn)(x,n),...l,children:[(0,a.jsx)("div",{className:(0,d.cn)("flex items-center justify-center","peer h-4 w-4 shrink-0 rounded border border-control bg-control/25 ring-offset-background","transition-colors duration-150 ease-in-out","hover:border-strong","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground data-[state=checked]:text-background",h?"bg-foreground text-background":"[&_svg]:invisible"),children:(0,a.jsx)(i.A,{className:"h-3 w-3",strokeWidth:4})}),(0,a.jsx)("div",{className:"text-xs flex-grow leading-none pointer-events-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:pointer-events-none peer-disabled:opacity-50",children:r})]})});w.displayName="MultiSelectorItem",h.Item=w},43242:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m});var a=n(80263),s=n(53239),r=n(70800),i=n(51500),l=n(24771);function o(e){let{children:t,className:n,tag:s="div",style:r}=e;return(0,a.jsx)("".concat(s),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}o.Title=function(e){let{className:t,level:n=1,children:s,style:r}=e;return(0,a.jsx)("h".concat(n),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:s})},o.Text=function(e){let{className:t,children:n,style:s,type:r,disabled:i,mark:l,code:o,keyboard:c,underline:d,strikethrough:u,strong:p,small:m}=e;return o?(0,a.jsx)("code",{style:s,children:n}):l?(0,a.jsx)("mark",{style:s,children:n}):c?(0,a.jsx)("kbd",{style:s,children:n}):p?(0,a.jsx)("strong",{style:s,children:n}):(0,a.jsx)("span",{style:s,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:n})},o.Link=l.A;let c=(0,s.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,a.jsx)(c.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},u=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function p(e){let{children:t,className:n,ulClassName:s,style:r,type:i="text"}=e;return(0,a.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:n,style:r,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(d,{type:i,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("ul",{className:s,children:t})})})}p.Item=function(e){let{children:t,icon:n,active:s,rounded:l,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:p}=e,m=(0,r.A)("menu"),{type:x}=u(),f=[m.item.base];f.push(m.item.variants[x].base),s?f.push(m.item.variants[x].active):f.push(m.item.variants[x].normal);let h=[m.item.content.base];s?h.push(m.item.content.active):h.push(m.item.content.normal);let b=[m.item.icon.base];return s?b.push(m.item.icon.active):b.push(m.item.icon.normal),(0,a.jsxs)("li",{role:"menuitem",className:(0,i.cn)("outline-none",f),style:p,onClick:o,"aria-current":s?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[n&&(0,a.jsx)("div",{className:"".concat(b.join(" ")," min-w-fit"),children:n}),(0,a.jsx)("span",{className:h.join(" "),children:t})]})},p.Group=function(e){let{children:t,icon:n,title:s}=e,i=(0,r.A)("menu"),{type:l}=u();return(0,a.jsxs)("div",{className:[i.group.base,i.group.variants[l]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[n&&(0,a.jsx)("span",{className:i.group.icon,children:n}),(0,a.jsx)("span",{className:i.group.content,children:s}),t]})},p.Misc=function(e){let{children:t}=e;return(0,a.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(o.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("span",{children:t})})})};let m=p},44893:(e,t,n)=>{"use strict";n.d(t,{bL:()=>v,zi:()=>w});var a=n(54993),s=n(53239),r=n(91968),i=n(63774),l=n(68436),o=n(87990),c=n(15630),d=n(89422),u=n(70297);let p="Switch",[m,x]=(0,l.A)(p),[f,h]=m(p),b=(0,s.forwardRef)((e,t)=>{let{__scopeSwitch:n,name:l,checked:c,defaultChecked:d,required:p,disabled:m,value:x="on",onCheckedChange:h,...b}=e,[g,v]=(0,s.useState)(null),w=(0,i.s)(t,e=>v(e)),N=(0,s.useRef)(!1),S=!g||!!g.closest("form"),[E=!1,A]=(0,o.i)({prop:c,defaultProp:d,onChange:h});return(0,s.createElement)(f,{scope:n,checked:E,disabled:m},(0,s.createElement)(u.sG.button,(0,a.A)({type:"button",role:"switch","aria-checked":E,"aria-required":p,"data-state":j(E),"data-disabled":m?"":void 0,disabled:m,value:x},b,{ref:w,onClick:(0,r.m)(e.onClick,e=>{A(e=>!e),S&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})})),S&&(0,s.createElement)(y,{control:g,bubbles:!N.current,name:l,value:x,checked:E,required:p,disabled:m,style:{transform:"translateX(-100%)"}}))}),g=(0,s.forwardRef)((e,t)=>{let{__scopeSwitch:n,...r}=e,i=h("SwitchThumb",n);return(0,s.createElement)(u.sG.span,(0,a.A)({"data-state":j(i.checked),"data-disabled":i.disabled?"":void 0},r,{ref:t}))}),y=e=>{let{control:t,checked:n,bubbles:r=!0,...i}=e,l=(0,s.useRef)(null),o=(0,c.Z)(n),u=(0,d.X)(t);return(0,s.useEffect)(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==n&&t){let a=new Event("click",{bubbles:r});t.call(e,n),e.dispatchEvent(a)}},[o,n,r]),(0,s.createElement)("input",(0,a.A)({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:l,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function j(e){return e?"checked":"unchecked"}let v=b,w=g},46221:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(80263),s=n(24400),r=n(72035),i=n(90226),l=n(91435),o=n(20438),c=n(5483),d=n(52361),u=n(78098),p=n(97175),m=n(54660);let x=()=>{let e=(0,c.KT)(),t=(0,s.useRouter)().pathname.split("/")[4],{data:n}=(0,l.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:d}=(0,o.Q)({projectRef:null==e?void 0:e.ref}),u=void 0!==(null!=n?n:[]).find(e=>"pg_net"===e.name),x=(null==d?void 0:d.selected_addons.find(e=>"pitr"===e.type))!==void 0,f=(0,r.p4)(),h=(0,m._P)("enablePgReplicate");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.l,{page:t,menu:(0,p.k)(e,{pgNetExtensionExists:u,pitrEnabled:x,columnLevelPrivileges:f,enablePgReplicate:h}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})},f=(0,d.r)(e=>{let{children:t}=e;return(0,a.jsx)(u.A,{product:"Database",productMenu:(0,a.jsx)(x,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:t})})},69751:(e,t,n)=>{"use strict";n.d(t,{UC:()=>Q,Y9:()=>U,bL:()=>O,l9:()=>H,q7:()=>V});var a=n(54993),s=n(53239),r=n(68436),i=n(86829),l=n(63774),o=n(91968),c=n(87990),d=n(70297),u=n(90709),p=n(77306),m=n(37268);let x="Accordion",f=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[h,b,g]=(0,i.N)(x),[y,j]=(0,r.A)(x,[g,u.z3]),v=(0,u.z3)(),w=s.forwardRef((e,t)=>{let{type:n,...r}=e;return s.createElement(h.Provider,{scope:e.__scopeAccordion},"multiple"===n?s.createElement(C,(0,a.A)({},r,{ref:t})):s.createElement(_,(0,a.A)({},r,{ref:t})))});w.propTypes={type(e){let t=e.value||e.defaultValue;return e.type&&!["single","multiple"].includes(e.type)?Error("Invalid prop `type` supplied to `Accordion`. Expected one of `single | multiple`."):"multiple"===e.type&&"string"==typeof t?Error("Invalid prop `type` supplied to `Accordion`. Expected `single` when `defaultValue` or `value` is type `string`."):"single"===e.type&&Array.isArray(t)?Error("Invalid prop `type` supplied to `Accordion`. Expected `multiple` when `defaultValue` or `value` is type `string[]`."):null}};let[N,S]=y(x),[E,A]=y(x,{collapsible:!1}),_=s.forwardRef((e,t)=>{let{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:l=!1,...o}=e,[d,u]=(0,c.i)({prop:n,defaultProp:r,onChange:i});return s.createElement(N,{scope:e.__scopeAccordion,value:d?[d]:[],onItemOpen:u,onItemClose:s.useCallback(()=>l&&u(""),[l,u])},s.createElement(E,{scope:e.__scopeAccordion,collapsible:l},s.createElement(R,(0,a.A)({},o,{ref:t}))))}),C=s.forwardRef((e,t)=>{let{value:n,defaultValue:r,onValueChange:i=()=>{},...l}=e,[o=[],d]=(0,c.i)({prop:n,defaultProp:r,onChange:i}),u=s.useCallback(e=>d((t=[])=>[...t,e]),[d]),p=s.useCallback(e=>d((t=[])=>t.filter(t=>t!==e)),[d]);return s.createElement(N,{scope:e.__scopeAccordion,value:o,onItemOpen:u,onItemClose:p},s.createElement(E,{scope:e.__scopeAccordion,collapsible:!0},s.createElement(R,(0,a.A)({},l,{ref:t}))))}),[I,k]=y(x),R=s.forwardRef((e,t)=>{let{__scopeAccordion:n,disabled:r,dir:i,orientation:c="vertical",...u}=e,p=s.useRef(null),x=(0,l.s)(p,t),g=b(n),y="ltr"===(0,m.jH)(i),j=(0,o.m)(e.onKeyDown,e=>{var t;if(!f.includes(e.key))return;let n=e.target,a=g().filter(e=>{var t;return!(null!=(t=e.ref.current)&&t.disabled)}),s=a.findIndex(e=>e.ref.current===n),r=a.length;if(-1===s)return;e.preventDefault();let i=s,l=r-1,o=()=>{(i=s+1)>l&&(i=0)},d=()=>{(i=s-1)<0&&(i=l)};switch(e.key){case"Home":i=0;break;case"End":i=l;break;case"ArrowRight":"horizontal"===c&&(y?o():d());break;case"ArrowDown":"vertical"===c&&o();break;case"ArrowLeft":"horizontal"===c&&(y?d():o());break;case"ArrowUp":"vertical"===c&&d()}null==(t=a[i%r].ref.current)||t.focus()});return s.createElement(I,{scope:n,disabled:r,direction:i,orientation:c},s.createElement(h.Slot,{scope:n},s.createElement(d.sG.div,(0,a.A)({},u,{"data-orientation":c,ref:x,onKeyDown:r?void 0:j}))))}),P="AccordionItem",[T,M]=y(P),D=s.forwardRef((e,t)=>{let{__scopeAccordion:n,value:r,...i}=e,l=k(P,n),o=S(P,n),c=v(n),d=(0,p.B)(),m=r&&o.value.includes(r)||!1,x=l.disabled||e.disabled;return s.createElement(T,{scope:n,open:m,disabled:x,triggerId:d},s.createElement(u.bL,(0,a.A)({"data-orientation":l.orientation,"data-state":F(m)},c,i,{ref:t,disabled:x,open:m,onOpenChange:e=>{e?o.onItemOpen(r):o.onItemClose(r)}})))}),L=s.forwardRef((e,t)=>{let{__scopeAccordion:n,...r}=e,i=k(x,n),l=M("AccordionHeader",n);return s.createElement(d.sG.h3,(0,a.A)({"data-orientation":i.orientation,"data-state":F(l.open),"data-disabled":l.disabled?"":void 0},r,{ref:t}))}),z="AccordionTrigger",q=s.forwardRef((e,t)=>{let{__scopeAccordion:n,...r}=e,i=k(x,n),l=M(z,n),o=A(z,n),c=v(n);return s.createElement(h.ItemSlot,{scope:n},s.createElement(u.l9,(0,a.A)({"aria-disabled":l.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:l.triggerId},c,r,{ref:t})))}),B=s.forwardRef((e,t)=>{let{__scopeAccordion:n,...r}=e,i=k(x,n),l=M("AccordionContent",n),o=v(n);return s.createElement(u.UC,(0,a.A)({role:"region","aria-labelledby":l.triggerId,"data-orientation":i.orientation},o,r,{ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}}))});function F(e){return e?"open":"closed"}let O=w,V=D,U=L,H=q,Q=B},73047:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(80263),s=n(15601),r=n.n(s),i=n(43242),l=n(2119),o=n(40022);let c=e=>{let{name:t="",isActive:n,isExternal:s,icon:c,rightIcon:d,url:u="",target:p="_self",onClick:m,textClassName:x="",hoverText:f="",label:h}=e,b=(0,a.jsx)(i.Ay.Item,{icon:c,rounded:!0,active:n,onClick:m,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{title:f||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+x,children:[(0,a.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==h&&(0,a.jsx)(l.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:h})]}),d&&(0,a.jsx)("div",{children:d})]})});return u?s?(0,a.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,a.jsx)(r(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,a.jsx)(r(),{href:u,className:"block",target:p,children:b}):b}},74680:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(15740).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},84357:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(15740).A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},90226:(e,t,n)=>{"use strict";n.d(t,{l:()=>l});var a=n(80263),s=n(43242),r=n(2119),i=n(73047);let l=e=>{let{page:t,menu:n}=e;return(0,a.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,a.jsx)(s.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:n.map((e,l)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(s.Ay.Group,{title:e.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,a.jsx)("span",{children:e.title}),e.isPreview&&(0,a.jsx)(r.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:e.items.map(e=>{let n=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,a.jsx)(i.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:n,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),l!==n.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},91435:(e,t,n)=>{"use strict";n.d(t,{z:()=>d});var a=n(56947),s=n(65172),r=n(28140),i=n(5483),l=n(63492),o=n(89811);async function c(e,t,n){let{projectRef:a,connectionString:r}=e;if(!a)throw Error("projectRef is required");let i=new Headers(n);r&&i.set("x-connection-encrypted",r);let{data:l,error:c}=await (0,s.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":r,"x-pg-application-name":o.r},path:{ref:a}},headers:i,signal:t});return c&&(0,s.H4)(c),l}let d=function(e){let{projectRef:t,connectionString:n}=e,{enabled:s=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,i.KT)(),u=(null==d?void 0:d.status)===l.BU.ACTIVE_HEALTHY;return(0,a.I)(r.I.list(t),e=>{let{signal:a}=e;return c({projectRef:t,connectionString:n},a)},{enabled:s&&void 0!==t&&u,...o})}},92512:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});var a=n(80263),s=n(51500),r=n(62136);let i=e=>{let{title:t,description:n,docsUrl:i,actions:l,className:o}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),n&&(0,a.jsx)("div",{className:"prose text-sm max-w-2xl",children:n})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==i&&(0,a.jsx)(r.A,{href:i}),l]})]})}},92882:(e,t,n)=>{"use strict";n.d(t,{BS:()=>l,Dm:()=>d,HJ:()=>y,Rf:()=>b,Uw:()=>c,Vw:()=>w,Xr:()=>v,aw:()=>f,bV:()=>i,cJ:()=>m,dX:()=>u,eh:()=>o,fh:()=>j,gu:()=>p,sZ:()=>x,tn:()=>g,xp:()=>h});var a=n(80263),s=n(53239),r=n(51500);let i="mx-auto w-full max-w-[1200px]",l="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,s.forwardRef)((e,t)=>{let{className:n,bottomPadding:s,size:i="default",...o}=e;return(0,a.jsx)("div",{ref:t,...o,className:(0,r.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[i],l,s&&"pb-16",n)})}),c=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("header",{...s,ref:t,className:(0,r.cn)("w-full","flex-col gap-3 py-6",n)})}),d=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h1",{ref:t,...s,className:(0,r.cn)("text-2xl",n)})}),u=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",n)})}),p=(0,s.forwardRef)((e,t)=>{let{className:n,isFullWidth:s,topPadding:i,...l}=e;return(0,a.jsx)("div",{ref:t,...l,className:(0,r.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 lg:grid md:grid-cols-12",n)})}),m=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("w-full h-px bg-border",n)})}),x=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h3",{ref:t,...s,className:(0,r.cn)("text-foreground text-xl",n)})}),f=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",n)})}),h=(0,s.forwardRef)((e,t)=>{let{className:n,children:s,title:i,...l}=e;return(0,a.jsxs)("div",{ref:t,...l,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",n),children:[i&&(0,a.jsx)("h2",{children:i}),s]})}),b=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",n)})}),g=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3 items-center",n)})}),y=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex w-full items-center",n)})}),j=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-row gap-3",n)})}),v=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",n)})}),w=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)(i,l,"my-8 flex flex-col gap-8",n)})});c.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",m.displayName="ScaffoldDivider",p.displayName="ScaffoldSection",v.displayName="ScaffoldColumn",h.displayName="ScaffoldSectionDetail",b.displayName="ScaffoldSectionContent",g.displayName="ScaffoldFilterAndContent",y.displayName="ScaffoldActionsContainer",j.displayName="ScaffoldActionsGroup",w.displayName="ScaffoldContainerLegacy",x.displayName="ScaffoldSectionTitle",f.displayName="ScaffoldSectionDescription"},97628:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/replication",function(){return n(34473)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[89,5233,726,4280,3730,2981,6110,386,7661,5599,8445,4024,3019,7654,8274,7803,9146,5549,5007,4017,8398,4560,7795,3895,4444,7182,1972,7686,8821,2690,1356,5756,8098,6593,636,8792],()=>t(97628)),_N_E=e.O()}]);